<div class="write-container" data-cy="write-container" [class]="localParameters.keyboardMode.toLowerCase() + '-type'">
  <div class="stimulus-wrapper" data-cy="stimulus-wrapper">
    <img [src]="localParameters.imageSource" [alt]="" data-cy="stimulus-image">
  </div>

  <div class="input-wrapper">
    <div class="text-wrapper" data-cy="text-wrapper">
      <div class="text-display" data-cy="text-display">
        <div class="text-content">
          @if (currentText) {
            <span data-cy="text-span">{{ currentText }}</span>
          }
        </div>
      </div>
    </div>

    <div class="keyboard-wrapper" data-cy="keyboard-wrapper">
      <div>
        @if (localParameters.keyboardMode === 'CHARACTERS') {
          <div class="character-list">
            @for (button of characterList; track $index) {
              <button type="button"
                      class="keyboard-button"
                      [attr.aria-label]="currentText.length === 0 ? button.toUpperCase() : button"
                      (click)="addChar(button)"
                      [disabled]="isDisabled"
                      [attr.data-cy]="'character-button-' + button"
              >
                {{ currentText.length === 0 ? button.toUpperCase() : button }}
              </button>
            }
          </div>

          <div class="grapheme-list">
            @if (localParameters.addUmlautKeys) {
              @for (button of umlautListChars; track $index) {
                <button type="button"
                        class="keyboard-button"
                        [attr.aria-label]="currentText.length === 0 ? button.toUpperCase() : button"
                        (click)="addChar(button)"
                        [disabled]="isDisabled"
                        [attr.data-cy]="'grapheme-button-' + button"
                >
                  {{ currentText.length === 0  ? button.toUpperCase() : button }}
                </button>
              }
            }
            @for (button of localParameters.keysToAdd; track $index) {
              <button type="button"
                      class="keyboard-button"
                      [attr.aria-label]="currentText.length === 0 ? capitalize(button) : button"
                      (click)="addChar(button)"
                      [disabled]="isDisabled"
                      [attr.data-cy]="'keyboard-button-' + button"
              >
                {{ currentText.length === 0  ? capitalize(button) : button }}
              </button>
            }
          </div>
        } @else if (localParameters.keyboardMode === 'NUMBERS_LINE') {
          @for (button of numbersList; track $index) {
            <button type="button"
                    class="keyboard-button"
                    [attr.aria-label]="currentText.length === 0 ? button : button"
                    (click)="addChar(button)"
                    [disabled]="isDisabled"
                    [attr.data-cy]="'numbers-button-' + button"
            >
              {{ button }}
            </button>
          }
        }
      </div>

      @if (localParameters.addBackspaceKey) {
        <button type="button"
                class="keyboard-button backspace-button"
                [attr.aria-label]="'Backspace'"
                (click)="deleteChar()"
                [disabled]="currentText.length === 0"
                [attr.data-cy]="'backspace-button'"
        >
          <svg xmlns="http://www.w3.org/2000/svg" height="32" viewBox="0 -960 960 960" width="32"
               fill="currentColor">
            <path d="m456-320 104-104 104 104 56-56-104-104 104-104-56-56-104 104-104-104-56 56 104 104-104 104 56 56Zm-96 160q-19 0-36-8.5T296-192L80-480l216-288q11-15 28-23.5t36-8.5h440q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H360ZM180-480l180 240h440v-480H360L180-480Zm400 0Z"/>
          </svg>
        </button>
      }
    </div>
  </div>
</div>
